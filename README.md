# 🏎️ ESP32-MicroROS-Racer

> 
> 基于 ESP32-S3 的智能小车底层控制系统。目前处于第一开发阶段，专注于运动学解算、传感器融合与 PID 闭环控制。

## 📖 项目简介 (Introduction)

本项目是智能竞速小车系统的**底层驱动与控制核心**。作为项目的基石，当前版本实现了基于 FreeRTOS 的实时任务调度系统，能够通过 MPU6050 采集姿态数据，并利用 PID 算法对麦克纳姆轮底盘进行精确的速度闭环控制。

本项目将在未来持续迭代，逐步接入 ROS2 Micro-ROS 框架与物联网云平台。

## ✨ 当前功能 (Phase 1 Features)

*   **🏎️ 基础运动控制**
    *   **麦克纳姆轮运动学解算**：支持全向移动（前进、横移、自转）。
    *   **电机驱动**：4路 PWM 占空比独立调节。
*   **⚖️ 闭环控制算法**
    *   **增量式 PID**：实现从目标速度到电机 PWM 的精准映射。
    *   **死区补偿**：针对低速下的电机非线性响应进行软件补偿。
*   **🧭 姿态感知 (IMU)**
    *   **MPU6050 驱动**：I2C 高速读取加速度计与陀螺仪原始数据。
    *   **数据滤波**：基础的数据平滑处理（为后续互补滤波做准备）。
*   **🛠️ 系统架构**
    *   基于 **ESP-IDF (FreeRTOS)** 的多任务架构。
    *   模块化设计：驱动层 (Driver) 与 应用层 (App) 解耦。

## 🗺️ 开发路线图 (Roadmap)

本项目将分三个学期迭代开发：

- [x] **Phase 1: 底层控制 (Current)**
    - [x] 硬件组装与电机驱动
    - [x] IMU 数据采集
    - [x] PID 速度闭环
- [ ] **Phase 2: ROS2 接入**
    - [ ] 移植 micro-ROS Agent
    - [ ] 发布 Odometry 里程计话题
    - [ ] 订阅 Twist 速度指令
- [ ] **Phase 3: 高级功能**
    - [ ] 结合 Lidar 实现 SLAM 建图
    - [ ] IoT 云端数据上报

## 🛠️ 技术栈 (Tech Stack)

| 领域 | 技术/工具 |
| :--- | :--- |
| **主控芯片** | ESP32-S3 |
| **开发框架** | ESP-IDF v5.x (基于 FreeRTOS) |
| **编程语言** | C / C++ |
| **传感器** | MPU6050 (6轴 IMU) |
| **执行器** | 直流减速电机 + 霍尔编码器 |
| **调试工具** | Serial Monitor, Logic Analyzer |

## 📂 目录结构

```text
ESP32-MicroROS-Racer/
├── components/         # 自定义组件
│   ├── motor_driver/   # 电机驱动与PID逻辑
│   └── imu_driver/     # MPU6050 I2C 驱动
├── main/               # 主程序入口
│   ├── main.c          # FreeRTOS 任务创建
│   └── app_config.h    # 系统引脚定义与参数配置
└── README.md           # 项目说明
